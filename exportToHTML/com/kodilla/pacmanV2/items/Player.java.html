<html>
<head>
<title>Player.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6897bb;}
.s3 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Player.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">com.kodilla.pacmanV2.items</span><span class="s0">;</span>

import <span class="s1">com.kodilla.pacmanV2.PacmanAppRunner</span><span class="s0">;</span>
import <span class="s1">com.kodilla.pacmanV2.pacmanBoard.BonusMode</span><span class="s0">;</span>

import <span class="s1">java.awt.*</span><span class="s0">;</span>

import static <span class="s1">com.kodilla.pacmanV2.pacmanBoard.levelFactory.LevelFactory.maze</span><span class="s0">;</span>

public class <span class="s1">Player </span><span class="s0">extends </span><span class="s1">Rectangle {</span>

    <span class="s0">private static boolean </span><span class="s1">isAlive</span><span class="s0">;</span>
    private int <span class="s1">animationPicture</span><span class="s0">, </span><span class="s1">playerImagePossition</span><span class="s0">, </span><span class="s1">TimeAnimation = </span><span class="s2">0</span><span class="s0">;</span>
    private <span class="s1">BonusMode bonusMode = </span><span class="s0">new </span><span class="s1">BonusMode()</span><span class="s0">;</span>
    private <span class="s1">Player player</span><span class="s0">;</span>
    private int <span class="s1">speed = </span><span class="s2">4</span><span class="s0">;</span>
    private <span class="s1">String mainDirection = </span><span class="s3">&quot;STOP&quot;</span><span class="s0">, </span><span class="s1">nextDirection= </span><span class="s3">&quot;STOP&quot;</span><span class="s0">;</span>
    private final <span class="s1">Collision collision = </span><span class="s0">new </span><span class="s1">Collision()</span><span class="s0">;</span>
    private boolean <span class="s1">isNextDirection = </span><span class="s0">false;</span>

    boolean <span class="s1">HitByEnemy = </span><span class="s0">false;</span>



    public <span class="s1">Player(</span><span class="s0">int </span><span class="s1">x</span><span class="s0">, int </span><span class="s1">y) {</span>
        setBounds(x<span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">PacmanAppRunner.TILE_SIZE</span><span class="s0">, </span><span class="s1">PacmanAppRunner.TILE_SIZE)</span><span class="s0">;</span>
    <span class="s1">}</span>




    <span class="s0">public void </span><span class="s1">tick() {</span>

        bonusMode.checkIfBonusIsOn()<span class="s0">;</span>

        switch <span class="s1">(mainDirection) {</span>
            <span class="s0">case </span><span class="s3">&quot;RIGHT&quot;</span><span class="s1">:</span>
            {
                <span class="s0">if </span><span class="s1">(isInTheMiddleOfTile(x) &amp;&amp; checkIfIsNextDirectionTenChangeDirection()) {</span>
                    checkIfIsNextDirectionTenChangeDirection()<span class="s0">;</span>
                    break;
                <span class="s1">}</span>

                <span class="s0">if </span><span class="s1">(mainDirection.equals(</span><span class="s3">&quot;RIGHT&quot;</span><span class="s1">) &amp;&amp; collision.thereIsNoCollisionOnRight(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    ifIntersectWithDotThenRemoveDotAndAddPoints(x + speed<span class="s0">, </span><span class="s1">y)</span><span class="s0">;</span>
                    <span class="s1">checkIfPlayerIsInTeleport()</span><span class="s0">;</span>
                    <span class="s1">goRight()</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">0</span><span class="s0">;</span>
                    break;

                <span class="s1">} </span><span class="s0">else  </span><span class="s1">{</span>
                    setMainDirection(<span class="s3">&quot;STOP&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">0</span><span class="s0">;</span>

                    break;
                <span class="s1">}</span>
            }
            <span class="s0">case </span><span class="s3">&quot;LEFT&quot;</span><span class="s1">:</span>
            {
                <span class="s0">if </span><span class="s1">(isInTheMiddleOfTile(x) &amp;&amp; checkIfIsNextDirectionTenChangeDirection()) {</span>
                    checkIfIsNextDirectionTenChangeDirection()<span class="s0">;</span>
                    break;
                <span class="s1">}</span>

                <span class="s0">if </span><span class="s1">(mainDirection.equals(</span><span class="s3">&quot;LEFT&quot;</span><span class="s1">) &amp;&amp;collision.thereIsNoCollisionOnLeft(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    ifIntersectWithDotThenRemoveDotAndAddPoints(x - speed<span class="s0">, </span><span class="s1">y)</span><span class="s0">;</span>
                    <span class="s1">checkIfPlayerIsInTeleport()</span><span class="s0">;</span>
                    <span class="s1">goLeft()</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">1</span><span class="s0">;</span>
                    break;
                <span class="s1">} </span><span class="s0">else  </span><span class="s1">{</span>
                    setMainDirection(<span class="s3">&quot;STOP&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">1</span><span class="s0">;</span>
                    break;
                <span class="s1">}</span>
            }
            <span class="s0">case </span><span class="s3">&quot;UP&quot;</span><span class="s1">: {</span>
                <span class="s0">if </span><span class="s1">(isInTheMiddleOfTile(y) &amp;&amp; checkIfIsNextDirectionTenChangeDirection()) {</span>
                    checkIfIsNextDirectionTenChangeDirection()<span class="s0">;</span>
                    break;
                <span class="s1">}</span>
                <span class="s0">if </span><span class="s1">(mainDirection.equals(</span><span class="s3">&quot;UP&quot;</span><span class="s1">) &amp;&amp;collision.thereIsNoCollisionOnUp(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    ifIntersectWithDotThenRemoveDotAndAddPoints(x<span class="s0">, </span><span class="s1">y - speed)</span><span class="s0">;</span>
                    <span class="s1">goUp()</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">2</span><span class="s0">;</span>
                    break;
                <span class="s1">} </span><span class="s0">else  </span><span class="s1">{</span>
                    setMainDirection(<span class="s3">&quot;STOP&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">2</span><span class="s0">;</span>

                    break;
                <span class="s1">}</span>
            }
            <span class="s0">case </span><span class="s3">&quot;DOWN&quot;</span><span class="s1">:</span>
            {
                <span class="s0">if </span><span class="s1">(isInTheMiddleOfTile(y) &amp;&amp; checkIfIsNextDirectionTenChangeDirection()) {</span>
                    checkIfIsNextDirectionTenChangeDirection()<span class="s0">;</span>
                    break;
                <span class="s1">}</span>

                <span class="s0">if </span><span class="s1">(mainDirection.equals(</span><span class="s3">&quot;DOWN&quot;</span><span class="s1">) &amp;&amp;collision.thereIsNoCollisionOnDown(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    ifIntersectWithDotThenRemoveDotAndAddPoints(x<span class="s0">, </span><span class="s1">y + speed)</span><span class="s0">;</span>
                    <span class="s1">goDown()</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">3</span><span class="s0">;</span>
                    break;
                <span class="s1">} </span><span class="s0">else  </span><span class="s1">{</span>
                    setMainDirection(<span class="s3">&quot;STOP&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">3</span><span class="s0">;</span>
                    break;
                <span class="s1">}</span>
            }

                <span class="s0">default</span><span class="s1">:</span>
                    <span class="s0">break;</span>

        <span class="s1">}</span>



        playerAnimation()<span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">private void </span><span class="s1">checkIfPlayerIsInTeleport() {</span>
        <span class="s0">if </span><span class="s1">(x == </span><span class="s2">1480 </span><span class="s1">&amp;&amp; y == </span><span class="s2">400</span><span class="s1">) {</span>
            x = <span class="s2">0</span><span class="s0">;</span>
        <span class="s1">} </span><span class="s0">else if </span><span class="s1">(x == </span><span class="s2">0 </span><span class="s1">&amp;&amp; y == </span><span class="s2">400</span><span class="s1">) {</span>
            x = <span class="s2">1480</span><span class="s0">;</span>
        <span class="s1">}</span>
    }

    <span class="s0">private boolean </span><span class="s1">isInTheMiddleOfTile(</span><span class="s0">int </span><span class="s1">y) {</span>
        <span class="s0">return </span><span class="s1">y % PacmanAppRunner.TILE_SIZE == </span><span class="s2">0</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">private void </span><span class="s1">playerAnimation() {</span>

        <span class="s0">if </span><span class="s1">(TimeAnimation == </span><span class="s2">0</span><span class="s1">) {</span>
            animationPicture = <span class="s2">0</span><span class="s0">;</span>
        <span class="s1">} </span><span class="s0">else if </span><span class="s1">(TimeAnimation == </span><span class="s2">10</span><span class="s1">) {</span>
            animationPicture = <span class="s2">1</span><span class="s0">;</span>
        <span class="s1">} </span><span class="s0">else if </span><span class="s1">(TimeAnimation == </span><span class="s2">20</span><span class="s1">) {</span>
            animationPicture = <span class="s2">2</span><span class="s0">;</span>
        <span class="s1">} </span><span class="s0">else if </span><span class="s1">(TimeAnimation == </span><span class="s2">30</span><span class="s1">) {</span>
            animationPicture = <span class="s2">3</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">if </span><span class="s1">(TimeAnimation == </span><span class="s2">40</span><span class="s1">) {</span>
            TimeAnimation = <span class="s2">0</span><span class="s0">;</span>
        <span class="s1">}</span>
        TimeAnimation++<span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">private boolean </span><span class="s1">checkIfIsNextDirectionTenChangeDirection() {</span>
        isNextDirection = <span class="s0">false;</span>
        switch <span class="s1">(nextDirection) {</span>
            <span class="s0">case </span><span class="s3">&quot;UP&quot;</span><span class="s1">:</span>
                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnUp(x</span><span class="s0">,</span><span class="s1">y)) {</span>

                    mainDirection = <span class="s3">&quot;UP&quot;</span><span class="s0">;</span>
                    <span class="s1">goUp()</span><span class="s0">;</span>
                    <span class="s1">nextDirection = </span><span class="s3">&quot;STOP&quot;</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">2</span><span class="s0">;</span>
                    <span class="s1">isNextDirection = </span><span class="s0">true;</span>
                    break;
                <span class="s1">} </span><span class="s0">break;</span>
            case <span class="s3">&quot;DOWN&quot;</span><span class="s1">:</span>
                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnDown(x</span><span class="s0">,</span><span class="s1">y)) {</span>

                    mainDirection = <span class="s3">&quot;DOWN&quot;</span><span class="s0">;</span>
                    <span class="s1">goDown()</span><span class="s0">;</span>
                    <span class="s1">nextDirection = </span><span class="s3">&quot;STOP&quot;</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">3</span><span class="s0">;</span>
                    <span class="s1">isNextDirection = </span><span class="s0">true;</span>
                    break;

                <span class="s1">} </span><span class="s0">break;</span>

            case <span class="s3">&quot;LEFT&quot;</span><span class="s1">:</span>
                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnLeft(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    mainDirection = <span class="s3">&quot;LEFT&quot;</span><span class="s0">;</span>
                    <span class="s1">goLeft()</span><span class="s0">;</span>
                    <span class="s1">nextDirection = </span><span class="s3">&quot;STOP&quot;</span><span class="s0">;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">1</span><span class="s0">;</span>
                    <span class="s1">isNextDirection = </span><span class="s0">true;</span>
                    break;
                <span class="s1">} </span><span class="s0">break;</span>

            case <span class="s3">&quot;RIGHT&quot;</span><span class="s1">:</span>
                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnRight(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    mainDirection = <span class="s3">&quot;RIGHT&quot;</span><span class="s0">;</span>
                    <span class="s1">goRight()</span><span class="s0">;</span>
                    <span class="s1">nextDirection = </span><span class="s3">&quot;STOP&quot;</span><span class="s0">;</span>
                    <span class="s1">isNextDirection = </span><span class="s0">true;</span>
                    <span class="s1">playerImagePossition = </span><span class="s2">0</span><span class="s0">;</span>
                    break;
                <span class="s1">} </span><span class="s0">break;</span>

            default<span class="s1">: isNextDirection =</span><span class="s0">false;</span>

        <span class="s1">}</span>
        <span class="s0">return </span><span class="s1">isNextDirection</span><span class="s0">;</span>

    <span class="s1">}</span>


    <span class="s0">private void </span><span class="s1">ifIntersectWithDotThenRemoveDotAndAddPoints(</span><span class="s0">int </span><span class="s1">x</span><span class="s0">, int </span><span class="s1">y) {</span>


        Rectangle rectangle = <span class="s0">new </span><span class="s1">Rectangle(x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">PacmanAppRunner.TILE_SIZE</span><span class="s0">, </span><span class="s1">PacmanAppRunner.TILE_SIZE)</span><span class="s0">;</span>
        int <span class="s1">lineNumber = y/PacmanAppRunner.TILE_SIZE</span><span class="s0">;</span>

        int <span class="s1">minLineNumber</span><span class="s0">, </span><span class="s1">maxLinenumber</span><span class="s0">;</span>
        <span class="s1">maxLinenumber = lineNumber +</span><span class="s2">1</span><span class="s0">;</span>
        if <span class="s1">(lineNumber&lt;=</span><span class="s2">0</span><span class="s1">) {</span>
            minLineNumber = <span class="s2">0</span><span class="s0">;</span>
        <span class="s1">} </span><span class="s0">else </span><span class="s1">minLineNumber = lineNumber-</span><span class="s2">1</span><span class="s0">;</span>


        for <span class="s1">(lineNumber=minLineNumber</span><span class="s0">; </span><span class="s1">lineNumber &lt; maxLinenumber</span><span class="s0">; </span><span class="s1">lineNumber++) {</span>
            <span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">itemNumber = </span><span class="s2">0</span><span class="s0">; </span><span class="s1">itemNumber &lt; maze.getMaze().get(lineNumber).getLineOfItems().size()</span><span class="s0">; </span><span class="s1">itemNumber++) {</span>
                <span class="s0">if </span><span class="s1">(maze.getMaze().get(lineNumber).getLineOfItems().get(itemNumber) </span><span class="s0">instanceof </span><span class="s1">Dot) {</span>
                    <span class="s0">if </span><span class="s1">(rectangle.intersects((Dot) maze.getMaze().get(lineNumber).getLineOfItems().get(itemNumber))) {</span>
                        maze.getMaze().get(lineNumber).getLineOfItems().set(itemNumber<span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
                        <span class="s1">PacmanAppRunner.score.addPointForSmallDot()</span><span class="s0">;</span>
                    <span class="s1">}</span>
                }
                <span class="s0">if </span><span class="s1">(maze.getMaze().get(lineNumber).getLineOfItems().get(itemNumber) </span><span class="s0">instanceof </span><span class="s1">BigDot) {</span>
                    <span class="s0">if </span><span class="s1">(rectangle.intersects((BigDot) maze.getMaze().get(lineNumber).getLineOfItems().get(itemNumber))) {</span>
                        maze.getMaze().get(lineNumber).getLineOfItems().set(itemNumber<span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
                        <span class="s1">PacmanAppRunner.score.addPointForBigDot()</span><span class="s0">;</span>
                        <span class="s1">bonusMode.startBonus()</span><span class="s0">;</span>

                    <span class="s1">}</span>
                }
            }
        }
    }

    <span class="s0">private void </span><span class="s1">goDown() {</span>
        y += speed<span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">private void </span><span class="s1">goUp() {</span>
        y -= speed<span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">private void </span><span class="s1">goLeft() {</span>
        x -= speed<span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">private void </span><span class="s1">goRight() {</span>
        x += speed<span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">void </span><span class="s1">backToStart() {</span>
        x = <span class="s2">40</span><span class="s0">;</span>
        <span class="s1">y = </span><span class="s2">40</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public </span><span class="s1">String getMainDirection() {</span>
        <span class="s0">return </span><span class="s1">mainDirection</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public void </span><span class="s1">setMainDirection(String mainDirection) {</span>
        <span class="s0">this</span><span class="s1">.mainDirection = mainDirection</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public void </span><span class="s1">setNextDirection(String nextDirection) {</span>
        <span class="s0">this</span><span class="s1">.nextDirection = nextDirection</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public boolean </span><span class="s1">isHitByEnemy() {</span>
        <span class="s0">return </span><span class="s1">HitByEnemy</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public void </span><span class="s1">setHitByEnemy(</span><span class="s0">boolean </span><span class="s1">hitByEnemy) {</span>
        HitByEnemy = hitByEnemy<span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public void </span><span class="s1">repaint(Graphics g) {</span>
        g.drawImage(ItemPicture.player[playerImagePossition][animationPicture]<span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>

    <span class="s1">}</span>

}
</pre>
</body>
</html>