<html>
<head>
<title>Enemy.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6897bb;}
.s3 { color: #808080;}
.s4 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Enemy.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">com.kodilla.pacmanV2.items</span><span class="s0">;</span>

import <span class="s1">com.kodilla.pacmanV2.PacmanAppRunner</span><span class="s0">;</span>
import <span class="s1">com.kodilla.pacmanV2.pacmanBoard.levelFactory.LevelFactory</span><span class="s0">;</span>

import <span class="s1">java.awt.*</span><span class="s0">;</span>

public class <span class="s1">Enemy </span><span class="s0">extends </span><span class="s1">Rectangle {</span>

    <span class="s0">private int </span><span class="s1">startingLocationX</span><span class="s0">, </span><span class="s1">startingLocationY</span><span class="s0">,</span><span class="s1">tick = </span><span class="s2">0</span><span class="s0">, </span><span class="s1">animationPicture</span><span class="s0">;</span>
    private final <span class="s1">EnemyControl enemyControl = </span><span class="s0">new </span><span class="s1">EnemyControl(</span><span class="s0">this,</span><span class="s1">PacmanAppRunner.getPlayer())</span><span class="s0">;</span>
    private boolean <span class="s1">brave</span><span class="s0">;</span>
    private boolean <span class="s1">changeOfDirection</span><span class="s0">;</span>


    private boolean <span class="s1">itsEye = </span><span class="s0">false;</span>
    private <span class="s1">String colour</span><span class="s0">;</span>
    private <span class="s1">Directions direction = Directions.DOWN</span><span class="s0">;</span>
    private final <span class="s1">Collision collision = </span><span class="s0">new </span><span class="s1">Collision()</span><span class="s0">;</span>

      enum <span class="s1">Directions {</span>
        DOWN<span class="s0">,</span>
        <span class="s1">UP</span><span class="s0">,</span>
        <span class="s1">LEFT</span><span class="s0">,</span>
        <span class="s1">RIGHT</span><span class="s0">,</span>
        <span class="s1">STOP</span>
    }

    <span class="s0">public </span><span class="s1">Enemy(</span><span class="s0">int </span><span class="s1">x</span><span class="s0">, int </span><span class="s1">y</span><span class="s0">, boolean </span><span class="s1">brave</span><span class="s0">, </span><span class="s1">String colour) {</span>
        <span class="s0">this</span><span class="s1">.brave = brave</span><span class="s0">;</span>
        this<span class="s1">.colour = colour</span><span class="s0">;</span>
        <span class="s1">startingLocationY =y</span><span class="s0">;</span>
        <span class="s1">startingLocationX = x</span><span class="s0">;</span>
        <span class="s1">setBounds(x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">PacmanAppRunner.TILE_SIZE</span><span class="s0">, </span><span class="s1">PacmanAppRunner.TILE_SIZE)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public void </span><span class="s1">enemyTick() {</span>

        <span class="s3">// TURN ON animation enemy when bonus ON</span>
        <span class="s0">if </span><span class="s1">(PacmanAppRunner.bonus) {</span>
            animationPicture = <span class="s2">1</span><span class="s0">;</span>
        <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
            animationPicture = <span class="s2">0</span><span class="s0">;</span>
        <span class="s1">}</span>

        enemyControl.checkIfIntersectWithPlayer(x<span class="s0">, </span><span class="s1">y)</span><span class="s0">;</span>
        <span class="s1">enemyControl.checkIfNeedToUseATeleport()</span><span class="s0">;</span>

        if <span class="s1">(enemyControl.checkIfIsInHome()) {</span>
            LevelFactory.openDoor()<span class="s0">;</span>
            if <span class="s1">(colour.equals(</span><span class="s4">&quot;RED&quot;</span><span class="s1">) || colour.equals(</span><span class="s4">&quot;BLUE&quot;</span><span class="s1">)) {</span>
                itsEye = <span class="s0">false;</span>
                <span class="s1">waitThenGoOutside(</span><span class="s2">6</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                waitThenGoOutside(<span class="s2">12</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">itsEye = </span><span class="s0">false;</span>
            <span class="s1">}</span>

        } <span class="s0">else </span><span class="s1">{</span>
            LevelFactory.closeDoor()<span class="s0">;</span>
        <span class="s1">}</span>

        goToHomeWhenIsEye()<span class="s0">;</span>

        switch <span class="s1">(direction) {</span>
            <span class="s0">case </span><span class="s1">DOWN:</span>

                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnDown(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    <span class="s0">if </span><span class="s1">(enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()) {</span>
                        enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()<span class="s0">;</span>
                        break;
                    <span class="s1">}</span>
                    enemyControl.goDown()<span class="s0">;</span>
                    <span class="s1">tick++</span><span class="s0">;</span>

                    break;
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    enemyControl.changeDirection()<span class="s0">;</span>
                    <span class="s1">tick = </span><span class="s2">0</span><span class="s0">;</span>
                    break;
                <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">UP:</span>

                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnUp(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    <span class="s0">if </span><span class="s1">(enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()) {</span>
                        enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()<span class="s0">;</span>
                        break;
                    <span class="s1">}</span>
                    enemyControl.goUp()<span class="s0">;</span>
                    <span class="s1">tick++</span><span class="s0">;</span>
                    break;
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    enemyControl.changeDirection()<span class="s0">;</span>
                    <span class="s1">tick = </span><span class="s2">0</span><span class="s0">;</span>
                    break;
                <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">LEFT:</span>

                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnLeft(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    <span class="s0">if </span><span class="s1">(enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()) {</span>
                        enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()<span class="s0">;</span>
                        break;
                    <span class="s1">}</span>
                    enemyControl.goLeft()<span class="s0">;</span>
                    <span class="s1">tick++</span><span class="s0">;</span>

                    break;
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    enemyControl.changeDirection()<span class="s0">;</span>
                    <span class="s1">tick = </span><span class="s2">0</span><span class="s0">;</span>
                    break;
                <span class="s1">}</span>
            <span class="s0">case </span><span class="s1">RIGHT:</span>
                <span class="s0">if </span><span class="s1">(collision.thereIsNoCollisionOnRight(x</span><span class="s0">,</span><span class="s1">y)) {</span>
                    <span class="s0">if </span><span class="s1">(enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()) {</span>
                        enemyControl.trackPlayerAndCheckIfIsBetterToChangeDirectionThenChangeDirection()<span class="s0">;</span>
                        break;
                    <span class="s1">}</span>
                    enemyControl.goRight()<span class="s0">;</span>
                    <span class="s1">tick++</span><span class="s0">;</span>

                    break;
                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    enemyControl.changeDirection()<span class="s0">;</span>
                    <span class="s1">tick = </span><span class="s2">0</span><span class="s0">;</span>
                    break;
                <span class="s1">}</span>
            <span class="s0">default</span><span class="s1">:</span>
                direction = Directions.DOWN<span class="s0">;</span>
                break;
        <span class="s1">}</span>

    }

    <span class="s0">private void </span><span class="s1">goToHomeWhenIsEye() {</span>

        <span class="s0">if </span><span class="s1">(itsEye) {</span>
            <span class="s0">if </span><span class="s1">(x&gt;</span><span class="s2">600 </span><span class="s1">&amp;&amp; x&lt;</span><span class="s2">880 </span><span class="s1">&amp;&amp; y &gt;</span><span class="s2">320 </span><span class="s1">&amp;&amp; y &lt;</span><span class="s2">440</span><span class="s1">){</span>
                x = startingLocationX<span class="s0">;</span>
                <span class="s1">y = startingLocationY</span><span class="s0">;</span>
            <span class="s1">}</span>
            direction = Directions.STOP<span class="s0">;</span>
            <span class="s1">animationPicture =</span><span class="s2">2</span><span class="s0">;</span>
            if <span class="s1">(y &gt;startingLocationY) {</span>
                enemyControl.goUp()<span class="s0">;</span>
            <span class="s1">} </span><span class="s0">else if </span><span class="s1">(y&lt;startingLocationY) {</span>
                enemyControl.goDown()<span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(x &gt; startingLocationX) {</span>
                enemyControl.goLeft()<span class="s0">;</span>
            <span class="s1">} </span><span class="s0">else if </span><span class="s1">(x&lt;startingLocationX){</span>
                enemyControl.goRight()<span class="s0">;</span>
            <span class="s1">}</span>
        }
    }


    <span class="s0">public void </span><span class="s1">waitThenGoOutside(</span><span class="s0">int </span><span class="s1">timeInSeconds) {</span>
        <span class="s0">double </span><span class="s1">time = timeInSeconds*PacmanAppRunner.targetTick</span><span class="s0">;</span>
        if <span class="s1">(collision.thereIsNoCollisionOnUp(x</span><span class="s0">,</span><span class="s1">y)) {</span>
            <span class="s3">// when fps is set to 60  then 1 second is 60 ticks</span>
            <span class="s1">setDirections(Enemy.Directions.STOP)</span><span class="s0">;</span>
            if <span class="s1">(tick &gt; time) {</span>
                setDirections(Directions.UP)<span class="s0">;</span>
                <span class="s1">enemyControl.goUp()</span><span class="s0">;</span>

            <span class="s1">}</span>
            tick++<span class="s0">;</span>
        <span class="s1">}</span>
    }

     <span class="s0">boolean </span><span class="s1">isBrave() {</span>
        <span class="s0">return </span><span class="s1">brave</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public boolean </span><span class="s1">isItsEye() {</span>
        <span class="s0">return </span><span class="s1">itsEye</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public void </span><span class="s1">setItsEye(</span><span class="s0">boolean </span><span class="s1">itsEye) {</span>
        <span class="s0">this</span><span class="s1">.itsEye = itsEye</span><span class="s0">;</span>
    <span class="s1">}</span>

     <span class="s0">boolean </span><span class="s1">isChangeOfDirection() {</span>
        <span class="s0">return </span><span class="s1">changeOfDirection</span><span class="s0">;</span>
    <span class="s1">}</span>

     <span class="s0">void </span><span class="s1">setChangeOfDirection(</span><span class="s0">boolean </span><span class="s1">changeOfDirection) {</span>
        <span class="s0">this</span><span class="s1">.changeOfDirection = changeOfDirection</span><span class="s0">;</span>
    <span class="s1">}</span>

     Directions getDirection() {
        <span class="s0">return </span><span class="s1">direction</span><span class="s0">;</span>
    <span class="s1">}</span>

     <span class="s0">void </span><span class="s1">setDirections(Directions direction) {</span>
        <span class="s0">this</span><span class="s1">.direction = direction</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">public int </span><span class="s1">getStartingLocationX() {</span>
        <span class="s0">return </span><span class="s1">startingLocationX</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public int </span><span class="s1">getStartingLocationY() {</span>
        <span class="s0">return </span><span class="s1">startingLocationY</span><span class="s0">;</span>
    <span class="s1">}</span>


    <span class="s0">public void </span><span class="s1">paintEnemyBlue(Graphics g) {</span>
        g.drawImage(ItemPicture.enemyBlue[animationPicture]<span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s0">public void </span><span class="s1">paintEnemyRed(Graphics g) {</span>
        g.drawImage(ItemPicture.enemyRed[animationPicture]<span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">public void </span><span class="s1">paintEnemyPurple(Graphics g) {</span>
        g.drawImage(ItemPicture.enemyPurple[animationPicture]<span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">public void </span><span class="s1">paintEnemyGreen(Graphics g) {</span>
        g.drawImage(ItemPicture.enemyGreen[animationPicture]<span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, </span><span class="s2">32</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
}
</pre>
</body>
</html>